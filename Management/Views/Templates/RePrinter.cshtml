@{
    Layout = null;
}
<link href="../Content/css/style.css" rel="stylesheet" />
匹配桌台号<input type="text" ng-model="RePrinterElement.CurrentDeskId" />
<a href="javascript:;" class="btn btn-app btn-primary btn-xs" ng-click="Initialize()">
    <i class="icon-search bigger-230"></i>
    所有
</a>
<a href="javascript:;" class="btn btn-app btn-primary btn-xs" ng-click="GetPaid()">
    <i class="icon-search bigger-230"></i>
    已支付
</a>
<a href="javascript:;" class="btn btn-app btn-primary btn-xs" ng-click="GetUnpaid()">
    <i class="icon-search bigger-230"></i>
    未支付
</a>
<div class="row" ng-init="Initialize()">
    <div class="col-xs-12">
        <div class="table-responsive">
            <table class="table table-striped table-bordered table-hover nomargin">
                <thead>
                    <tr>
                        <th class="text-right">序号</th>
                        <th class="text-center">订单编号</th>
                        <th class="text-center">桌台号</th>
                        <th class="text-center">区域名</th>
                        <th class="text-center">收银员</th>
                        <th class="text-center">服务员</th>
                        <th class="text-center">顾客数量</th>
                        <th class="text-center">开始时间</th>
                        <th class="text-center">已支付</th>
                        <th class="text-center">支付种类</th>
                        <th class="text-center">付款金额</th>
                        <th class="text-center">消费金额</th>
                        <th class="text-center">优惠金额</th>
                        <th class="text-center">赠菜金额</th>
                        <th class="text-center">退菜金额</th>
                        <th class="text-center">相关操作</th>
                    </tr>
                </thead>
                <tbody>
                    <tr ng-repeat="dine in RePrinterElement.UnShiftDines|filter:{DeskId:RePrinterElement.CurrentDeskId}">
                        <td class="text-right">{{$index + 1}}</td>
                        <td class="text-right">{{dine.Id}}</td>
                        <td class="text-right">{{dine.DeskId}}</td>
                        <td class="text-right">{{dine.AreaName}}</td>
                        <td class="text-right">{{dine.ClerkName}}</td>
                        <td class="text-right">{{dine.WaiterName}}</td>
                        <td class="text-right">{{dine.HeadCount}}</td>
                        <td class="text-right">{{dine.BeginTime|date:'yyyy-MM-dd HH:mm:ss '}}</td>
                        <td class="text-right">
                            <span ng-if="dine.IsPaid">是</span>
                            <span ng-if="!dine.IsPaid">否</span>
                        </td>
                        <td class=text-center>
                            <p ng-repeat="dinepaiddetail in dine.PayKinds">
                                {{dinepaiddetail.Name}}
                            </p>
                        </td>
                        <td class=text-right>
                            <p ng-repeat="dinepaiddetail in dine.PayKinds">
                                {{dinepaiddetail.Price|currency : '￥'}}
                            </p>
                        </td>
                        <td class="text-right">
                            {{dine.Consume|currency:'￥'}}
                        </td>
                        <td class="text-right">
                            {{dine.DiscountPrice|currency:'￥'}}
                        </td>
                        <td class="text-right">
                            <span ng-show="!dine.Gift">￥0.00</span>
                            <span ng-show="dine.Gift">
                                {{dine.Gift|currency:'￥'}}
                            </span>
                        </td>
                        <td class="text-right">
                            <span ng-show="!dine.Returned">￥0.00</span>
                            <span ng-show="dine.Returned">
                                {{dine.Returned|currency:'￥'}}
                            </span>
                        </td>
                        <td class="text-right">
                            <nobr>
                                <button type="button" class="btn btn-minier btn-primary tooltip-success" data-rel="tooltip" data-placement="bottom" title="订单详情" tool  ng-click="Detail(dine)" >
                                    @*订单详情*@
                                    <i class="icon-file icon-on-right bigger-110"></i>
                                。</button>
                            </nobr>
                        </td>
                    </tr>
                </tbody>
            </table><!--table over-->
        </div><!--table over-->
    </div><!--col over-->
</div>



<script type="text/ng-template" id="ModalDetail.html">
    <div class="modal-header" ng-init="initialize()">
        <h3 class="modal-title">
            订单详情
        </h3>
    </div>
    <div class="modal-body">
        <div class="container-fluid">
            <div class="row">
                <span>订单编号：</span><span>{{RePrinterElement.CurrentDine.Id}}</span><br />
                <span>开始时间：</span><span>{{RePrinterElement.CurrentDine.BeginTime | date:'yyyy-MM-dd HH:mm:ss '}}</span><br />
                <span>桌台编号：</span><span>{{RePrinterElement.CurrentDine.DeskId}}</span><br />
                <span>房间号：</span><span>{{RePrinterElement.CurrentDine.AreaName}}</span><br />
                <span>收银员姓名：</span><span>{{RePrinterElement.CurrentDine.ClerkName}}</span><br />
                <span>服务员姓名：</span><span>{{RePrinterElement.CurrentDine.WaiterName}}</span><br />
                <span>顾客人数：</span><span>{{RePrinterElement.CurrentDine.HeadCount}}</span><br />
                <span>
                    已支付:
                    <span ng-if="RePrinterElement.CurrentDine.IsPaid">是</span>
                    <span ng-if="!RePrinterElement.CurrentDine.IsPaid">否</span>
                </span><br />
                <span>消费金额：</span><span>{{RePrinterElement.CurrentDine.Paid |currency: '￥'}}</span><br />
                <span>应计金额：</span><span>{{RePrinterElement.CurrentDine.Consume |currency: '￥'}}</span><br />
                <span>优惠金额：</span><span>{{RePrinterElement.CurrentDine.DiscountPrice |currency: '￥'}}</span><br />
                <span>赠菜金额：</span><span ng-show="!dine.Gift">￥0.00</span>
                <span ng-show="dine.Gift">
                    {{dine.Gift|currency:'￥'}}
                </span><br />
                <span>退菜金额：</span><span ng-show="!dine.Returned">￥0.00</span>
                <span ng-show="dine.Returned">
                    {{dine.Returned|currency:'￥'}}
                </span><br />
                <span>折扣率：</span><span>{{RePrinterElement.CurrentDine.Discount.toFixed(0)}}%</span><br />
                <span>支付方式：</span>
                <span ng-repeat="pay in RePrinterElement.CurrentDine.PayKinds">
                    {{pay.Name}},{{pay.Price|currency: '￥'}}
                </span><br />


                <table class="table table-bordered table-hover table-striped table-responsive">
                    <thead>
                        <tr>
                            <th>菜品编号</th>
                            <th>菜品名称</th>
                            <th>菜品数量</th>
                            <th>菜品价格</th>
                            <th>菜品原价格</th>
                            <th>折扣率(%)</th>
                        </tr>
                    </thead>
                    <tr ng-repeat="dinedetail in RePrinterElement.CurrentDine.DineMenus">
                        <td>
                            <span>{{dinedetail.MenuId}}</span>
                        </td>
                        <td>
                            <span>{{dinedetail.Name}}</span>
                        </td>
                        <td class=text-right>
                            <span>{{dinedetail.Count}}</span>
                        </td>
                        <td class=text-right>
                            <span>{{dinedetail.Price |currency: '￥'}}</span>
                        </td>
                        <td class=text-right>
                            <span>{{dinedetail.OriPrice|currency: '￥'}}</span>
                        </td>
                        <td class=text-right>
                            <span>{{dinedetail.Discount}}</span>
                        </td>
                    </tr>
                </table>
            </div>
        </div>
    </div>
    <div class="modal-footer">
        <button class="btn btn-success" type="button" ng-click="RePrintDine(RePrinterElement.CurrentDine)">补打印账单</button>
        <button class="btn btn-warning" type="button" ng-click="cancel()">取消</button>
    </div>
</script>